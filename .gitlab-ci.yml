build:trusty:
  image: js-er-code.jsc.nasa.gov:5005/lager/lager_image_base_trusty:stable
  script:
    - mkdir build
    - cd build
    - cmake .. && make

build:xenial:
  image: js-er-code.jsc.nasa.gov:5005/lager/lager_image_base_xenial:stable
  script:   
    - mkdir build
    - cd build
    - cmake .. && make

build:windows:
  script:
    - mkdir build
    - cd build
    - cmake -G "Visual Studio 15 2017" ..
    - cmake --build .
  tags:
    - lager
    - windows

coverage:build
  image: js-er-code.jsc.nasa.gov:5005/lager/lager_image_base_xenial:stable
    script:   
      - mkdir build
      - cd build
      - cmake .. && make lager_coverage
    artifacts:
      paths:
        - coverage/
        
pages:deploy
  dependencies:
    - coverage
  script:
    - mv coverage/ public/
  artifacts:
    paths:
      - public

